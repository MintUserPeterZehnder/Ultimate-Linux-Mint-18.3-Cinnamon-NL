#!/bin/bash
set -e

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Written To Be Used On 64 Bits Computers                                                                         "
echo "# Author 	: 	Peter Zehnder                                                                                       "
echo "#                                                                                                                 "
echo "##################################################################################################################"

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# RUN AT YOUR OWN RISK                                                                                            "
echo "#                                                                                                                 "
echo "##################################################################################################################"

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Checking Presence Of lsb-release And Install It When Missing                                                    "
echo "#                                                                                                                 "
echo "##################################################################################################################"

	if ! location="$(type -p "lsb_release")" || [ -z "lsb_release" ]; then

		# Check If apt-git Is Installed
		if which apt-get > /dev/null; then

			sudo apt-get install -y lsb-release

		fi

		# Check If pacman Is Installed
		if which pacman > /dev/null; then

			sudo pacman -S --noconfirm lsb-release

		fi

		# Check If eopkg Is Installed
		if which eopkg > /dev/null; then

			sudo eopkg install -y lsb-release

		fi
	
	fi

DISTRO=$(lsb_release -si)

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# You Are Working On                                                                                              " $DISTRO
echo "#                                                                                                                 "
echo "##################################################################################################################"

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Installing Dependencies                                                                                         "
echo "#                                                                                                                 "
echo "##################################################################################################################"

case $DISTRO in 

	LinuxMint|linuxmint|Ubuntu|ubuntu)

		if ! location="$(type -p "git")" || [ -z "git" ]; then

			echo "######################################################################################################"
			echo "#                                                                                                     "
			echo "# Installing git For This Script To Work                                                              "
			echo "#                                                                                                     " 
			echo "######################################################################################################"
			
		  	sudo apt-get install -y git

		  else
		  	echo "######################################################################################################"
		  	echo "#                                                                                                     "
		  	echo "# Git Was Installed. Proceeding...                                                                    "
		  	echo "#                                                                                                     "
		  	echo "######################################################################################################"
		  	
		fi

		;;

	Arch)

		if ! location="$(type -p "git")" || [ -z "git" ]; then

			echo "######################################################################################################"
			echo "#                                                                                                     "
			echo "# Installing git For This Script To Work                                                              "
			echo "#                                                                                                     "
			echo "######################################################################################################"

		  	sudo pacman -S --noconfirm git

		  else
		  
		  	echo "######################################################################################################"
		  	echo "#                                                                                                     "
		  	echo "# git Was Installed. Proceeding...                                                                    "
		  	echo "#                                                                                                     "
		  	echo "######################################################################################################"

		fi

		;;

	Solus)

		if ! location="$(type -p "git")" || [ -z "git" ]; then

			echo "######################################################################################################"
			echo "#                                                                                                     "
			echo "# Installing git For This Script To Work                                                              "
			echo "#                                                                                                     "
			echo "######################################################################################################"

		  	sudo eopkg install -y git

		  else
		  	echo "######################################################################################################"
		  	echo "#                                                                                                     "
		  	echo "# git Was Installed. Proceeding...                                                                    "
		  	echo "#                                                                                                     "
		  	echo "######################################################################################################"
		  	
		fi

		;;

	*)
		
		echo "##########################################################################################################"
		echo "#                                                                                                         "
		echo "# No Installation Lines For Your system.                                                                  "
		echo "#                                                                                                         "
		echo "##########################################################################################################"

		;;
esac

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# If There Is A Folder, Delete It                                                                                 "
echo "#                                                                                                                 "
echo "##################################################################################################################"

[ -d /tmp/Plank-Themes ] && rm -rf /tmp/Sardi-Extra

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Download From Github                                                                                            "
echo "#                                                                                                                 "
echo "##################################################################################################################"

git clone https://github.com/erikdubois/Plank-Themes /tmp/Plank-Themes

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Remove Some Of The Files                                                                                        "
echo "#                                                                                                                 "
echo "##################################################################################################################"

find /tmp/Plank-Themes -maxdepth 1 -type f -exec rm -rf '{}' \;

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# If There Is No Hidden Folder Then Make One                                                                      "
echo "#                                                                                                                 "
echo "##################################################################################################################"

[ -d $HOME"/.local/share/plank" ] || mkdir -p $HOME"/.local/share/plank"
[ -d $HOME"/.local/share/plank/themes" ] || mkdir -p $HOME"/.local/share/plank/themes"

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Copy The Files                                                                                                  "
echo "#                                                                                                                 "
echo "##################################################################################################################"

cp -r /tmp/Plank-Themes/* ~/.local/share/plank/themes/

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Remove Files From tmp                                                                                           "
echo "#                                                                                                                 "
echo "##################################################################################################################"

rm -rf /tmp/Plank-Themes

echo "##################################################################################################################"
echo "#                                                                                                                 "
echo "# Plank Themes Installed                                                                                          "
echo "#                                                                                                                 "
echo "##################################################################################################################"

